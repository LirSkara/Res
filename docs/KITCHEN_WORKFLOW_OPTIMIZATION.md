# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∫—É—Ö–Ω–∏

## üéØ –¶–µ–ª—å –∏–∑–º–µ–Ω–µ–Ω–∏–π

–£–ø—Ä–æ—Å—Ç–∏—Ç—å —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å –∫—É—Ö–Ω–∏, —É–±—Ä–∞–≤ –ª–∏—à–Ω–∏–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã –∏ —Å–¥–µ–ª–∞–≤ —Ä–∞–±–æ—Ç—É –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π.

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å –∫—É—Ö–Ω–∏
**–°—Ç–∞—Ä—ã–π –ø—Ä–æ—Ü–µ—Å—Å:**
1. –ö—É—Ö–Ω—è –≤–∏–¥–∏—Ç –ø–æ–∑–∏—Ü–∏–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `NEW`
2. –ü–æ–≤–∞—Ä –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –ø–æ–∑–∏—Ü–∏—é –≤ `IN_PREPARATION`
3. –ü–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ ‚Üí `READY`
4. –û—Ñ–∏—Ü–∏–∞–Ω—Ç –ø–æ–¥–∞–µ—Ç ‚Üí `SERVED`

**–ù–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å:**
1. –ö—É—Ö–Ω—è –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ —Å—Ä–∞–∑—É —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `IN_PREPARATION`
2. –ü–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ ‚Üí `READY`
3. –û—Ñ–∏—Ü–∏–∞–Ω—Ç –ø–æ–¥–∞–µ—Ç ‚Üí `SERVED`

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞—á–∞–ª–∞ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫–∞–∑–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `preparation_started_at`
- –í—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –æ—Ç –º–æ–º–µ–Ω—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ú–æ–¥–µ–ª—å OrderItem
```python
class OrderItem(Base):
    # –°—Ç–∞—Ç—É—Å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ IN_PREPARATION
    status: Mapped[OrderItemStatus] = mapped_column(
        SQLEnum(OrderItemStatus), 
        default=OrderItemStatus.IN_PREPARATION,  # –ë—ã–ª–æ: NEW
        nullable=False
    )
```

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –∑–∞–∫–∞–∑–∞
```python
# –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞
new_item = OrderItem(
    # ...–¥—Ä—É–≥–∏–µ –ø–æ–ª—è...
    status=OrderItemStatus.IN_PREPARATION,
    preparation_started_at=datetime.utcnow()  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
)

# –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –±–ª—é–¥–∞ –∫ –∑–∞–∫–∞–∑—É
new_item = OrderItem(
    # ...–¥—Ä—É–≥–∏–µ –ø–æ–ª—è...
    status=OrderItemStatus.IN_PREPARATION,
    preparation_started_at=datetime.utcnow()  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
)
```

### –†–∞—Å—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è
```python
# –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤ KitchenService
elif new_status == OrderItemStatus.READY:
    item.ready_at = current_time
    # –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –≤—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è
    if item.preparation_started_at:  # –ë—ã–ª–æ: sent_to_kitchen_at
        prep_time = int((current_time - item.preparation_started_at).total_seconds() / 60)
        item.actual_preparation_time = prep_time
```

### –§–∏–ª—å—Ç—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –∫—É—Ö–Ω–∏
```python
# KitchenService.get_orders_for_department()
if status_filter is None:
    status_filter = [OrderItemStatus.IN_PREPARATION]  # –ë—ã–ª–æ: NEW, SENT_TO_KITCHEN, IN_PREPARATION
```

## üìä –í–ª–∏—è–Ω–∏–µ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ `KITCHEN_SYSTEM.md` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Ä–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
- ‚úÖ API –ø—Ä–∏–º–µ—Ä—ã - –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã —Å—Ç–∞—Ç—É—Å–æ–≤
- ‚úÖ –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### –ü—Ä–∏–º–µ—Ä—ã API
```http
# –ü–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑—ã –¥–ª—è —Ü–µ—Ö–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)
GET /kitchen/orders?department=hot&status_filter=in_preparation,ready

# –í–º–µ—Å—Ç–æ —Å—Ç–∞—Ä–æ–≥–æ:
GET /kitchen/orders?department=hot&status_filter=new,sent_to_kitchen
```

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –î–ª—è –∫—É—Ö–Ω–∏:
- **–ú–µ–Ω—å—à–µ –∫–ª–∏–∫–æ–≤** - –Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –≤ —Å—Ç–∞—Ç—É—Å "–≥–æ—Ç–æ–≤–∏—Ç—Å—è"
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–∞–π–º–µ—Ä** - –≤—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –∑–∞—Å–µ–∫–∞–µ—Ç—Å—è —Å –º–æ–º–µ–Ω—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- **–§–æ–∫—É—Å –Ω–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏** - –ø–æ–≤–∞—Ä —Å–æ—Å—Ä–µ–¥–æ—Ç–∞—á–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –±–ª—é–¥–∞

### –î–ª—è —Å–∏—Å—Ç–µ–º—ã:
- **–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞** - –º–µ–Ω—å—à–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
- **–¢–æ—á–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** - –≤—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è —Å—á–∏—Ç–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **–ú–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫** - –º–µ–Ω—å—à–µ —Ä—É—á–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —Å—Ç–∞—Ç—É—Å–∞–º–∏

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–ª–∞ –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π:
1. **–£–ø—Ä–æ—â–µ–Ω** —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å –∫—É—Ö–Ω–∏
2. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω** —É—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è
3. **–£–º–µ–Ω—å—à–µ–Ω–æ** –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä—É—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
4. **–£–ª—É—á—à–µ–Ω–∞** —Ç–æ—á–Ω–æ—Å—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫

–ö—É—Ö–Ω—è —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–∏, –∞ –Ω–µ –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏! üç≥
