# –û—Ç—á–µ—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –∑–∞–∫–∞–∑–æ–≤

## üéØ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ –±–µ–∑ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã
- ‚úÖ –ó–∞–∫–∞–∑—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `payment_status: "unpaid"`
- ‚úÖ –ü–æ–ª–µ `payment_method_id` –æ—Å—Ç–∞–µ—Ç—Å—è `null`
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–∑–∂–µ —É–∫–∞–∑–∞—Ç—å —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–ª—é–¥ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–∫–∞–∑—ã
- ‚úÖ –≠–Ω–¥–ø–æ–∏–Ω—Ç `POST /orders/{order_id}/items/` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –±–ª—é–¥
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á–µ—Ç –æ–±—â–µ–π —Å—É–º–º—ã –∑–∞–∫–∞–∑–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (–æ—Ñ–∏—Ü–∏–∞–Ω—Ç—ã - —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–∫–∞–∑—ã, –∞–¥–º–∏–Ω—ã - –ª—é–±—ã–µ)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞ (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –≤ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–∫–∞–∑—ã)

### 3. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã –∑–∞–∫–∞–∑–∞
- ‚úÖ –≠–Ω–¥–ø–æ–∏–Ω—Ç `POST /orders/{order_id}/complete-payment`
- ‚úÖ –£–∫–∞–∑–∞–Ω–∏–µ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
- ‚úÖ –°–º–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ `payment_status: "paid"`

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–∞—Å—á–µ—Ç–∞—Ö
- ‚ùå –û—à–∏–±–∫–∞: `unsupported operand type(s) for +=: 'float' and 'decimal.Decimal'`
- ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ Decimal –ø—Ä–∏ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- ‚ùå –û—à–∏–±–∫–∞: `waiter_user.role.value == "waiter"` (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ)
- ‚úÖ –†–µ—à–µ–Ω–∏–µ: `waiter_user.role == UserRole.WAITER`

### 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ –ü–µ—Ä–µ–Ω–æ—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ –ø–∞–ø–∫—É `docs/`
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Ñ–∞–π–ª–æ–≤

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –±–µ–∑ –æ–ø–ª–∞—Ç—ã
```json
{
  "payment_status": "unpaid",
  "payment_method_id": null,
  "payment_method_name": null,
  "total_price": "450.0"
}
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–ª—é–¥–∞ –≤ –∑–∞–∫–∞–∑
```json
{
  "dish_name": "–¶–µ–∑–∞—Ä—å —Å –∫—É—Ä–∏—Ü–µ–π",
  "quantity": 1,
  "price": "350.0",
  "total": "350.0",
  "comment": "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –±–ª—é–¥–æ"
}
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
```json
{
  "total_price": "800.0",  // 450 + 350
  "items": [
    {"dish_name": "–ü–∞—Å—Ç–∞ –ö–∞—Ä–±–æ–Ω–∞—Ä–∞", "total": "450.0"},
    {"dish_name": "–¶–µ–∑–∞—Ä—å —Å –∫—É—Ä–∏—Ü–µ–π", "total": "350.0"}
  ]
}
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã
```json
{
  "message": "–ó–∞–∫–∞–∑ #4 —É—Å–ø–µ—à–Ω–æ –æ–ø–ª–∞—á–µ–Ω —Å–ø–æ—Å–æ–±–æ–º 'QR-–∫–æ–¥ (–°–ë–ü)'",
  "payment_status": "paid",
  "payment_method_name": "QR-–∫–æ–¥ (–°–ë–ü)"
}
```

## üöÄ –ì–æ—Ç–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

1. `POST /orders/` - –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ (–±–µ–∑ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã)
2. `GET /orders/{order_id}` - –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞
3. `POST /orders/{order_id}/items/` - **–î–æ–±–∞–≤–∏—Ç—å –±–ª—é–¥–æ –≤ –∑–∞–∫–∞–∑**
4. `PATCH /orders/{order_id}/items/{item_id}` - –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é –∑–∞–∫–∞–∑–∞
5. `DELETE /orders/{order_id}/items/{item_id}` - –£–¥–∞–ª–∏—Ç—å –±–ª—é–¥–æ –∏–∑ –∑–∞–∫–∞–∑–∞
6. `PATCH /orders/{order_id}/payment` - –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã
7. `POST /orders/{order_id}/complete-payment` - **–ó–∞–≤–µ—Ä—à–∏—Ç—å –æ–ø–ª–∞—Ç—É**

## ‚úÖ –ò—Ç–æ–≥

–í—Å–µ —Ç—Ä–µ–±—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã:
- –ó–∞–∫–∞–∑—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –±–µ–∑ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –±–ª—é–¥–∞ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–∫–∞–∑—ã
- –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –∑–∞–∫–∞–∑–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
- –í—Å–µ —Ä–∞—Å—á–µ—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã, –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
